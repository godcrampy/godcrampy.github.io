class Util{forEach(a,b){a=a||[];for(let c=0;c<a.length;c++)b(a[c])}getScrollTop(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}isMobile(){return window.matchMedia('only screen and (max-width: 680px)').matches}isTocStatic(){return window.matchMedia('only screen and (max-width: 1200px)').matches}animateCSS(b,a,e,c){Array.isArray(a)||(a=[a]),b.classList.add('animated',...a);const d=()=>{b.classList.remove('animated',...a),b.removeEventListener('animationend',d),typeof c=='function'&&c()};e||b.addEventListener('animationend',d,!1)}}class Theme{constructor(){this.config=window.config,this.data=this.config.data,this.isDark=document.body.getAttribute('theme')==='dark',this.util=new Util,this.newScrollTop=this.util.getScrollTop(),this.oldScrollTop=this.newScrollTop,this.scrollEventSet=new Set,this.resizeEventSet=new Set,this.switchThemeEventSet=new Set,this.clickMaskEventSet=new Set,window.objectFitImages&&objectFitImages()}initSVGIcon(){this.util.forEach(document.querySelectorAll('[data-svg-src]'),a=>{fetch(a.getAttribute('data-svg-src')).then(a=>a.text()).then(e=>{const c=document.createElement('div');c.insertAdjacentHTML('afterbegin',e);const b=c.firstChild;b.setAttribute('data-svg-src',a.getAttribute('data-svg-src')),b.classList.add('icon');const d=b.getElementsByTagName('title');d.length&&b.removeChild(d[0]),a.parentElement.replaceChild(b,a)}).catch(a=>{console.error(a)})})}initTwemoji(){this.config.twemoji&&twemoji.parse(document.body)}initMenuMobile(){const a=document.getElementById('menu-toggle-mobile'),b=document.getElementById('menu-mobile');a.addEventListener('click',()=>{document.body.classList.toggle('blur'),a.classList.toggle('active'),b.classList.toggle('active')},!1),this._menuMobileOnClickMask=this._menuMobileOnClickMask||(()=>{a.classList.remove('active'),b.classList.remove('active')}),this.clickMaskEventSet.add(this._menuMobileOnClickMask)}initSwitchTheme(){this.util.forEach(document.getElementsByClassName('theme-switch'),a=>{a.addEventListener('click',()=>{document.body.getAttribute('theme')==='dark'?document.body.setAttribute('theme','light'):document.body.setAttribute('theme','dark'),this.isDark=!this.isDark,window.localStorage&&localStorage.setItem('theme',this.isDark?'dark':'light');for(let a of this.switchThemeEventSet)a()},!1)})}initSearch(){const a=this.config.search,e=this.util.isMobile();if(!a||e&&this._searchMobileOnce||!e&&this._searchDesktopOnce)return;const j=a.maxResultLength?a.maxResultLength:10,i=a.snippetLength?a.snippetLength:50,d=a.highlightTag?a.highlightTag:'em',c=e?'mobile':'desktop',g=document.getElementById(`header-${c}`),h=document.getElementById(`search-input-${c}`),l=document.getElementById(`search-toggle-${c}`),f=document.getElementById(`search-loading-${c}`),b=document.getElementById(`search-clear-${c}`);e?(this._searchMobileOnce=!0,h.addEventListener('focus',()=>{document.body.classList.add('blur'),g.classList.add('open')},!1),document.getElementById('search-cancel-mobile').addEventListener('click',()=>{g.classList.remove('open'),document.body.classList.remove('blur'),document.getElementById('menu-toggle-mobile').classList.remove('active'),document.getElementById('menu-mobile').classList.remove('active'),f.style.display='none',b.style.display='none',this._searchMobile&&this._searchMobile.autocomplete.setVal('')},!1),b.addEventListener('click',()=>{b.style.display='none',this._searchMobile&&this._searchMobile.autocomplete.setVal('')},!1),this._searchMobileOnClickMask=this._searchMobileOnClickMask||(()=>{g.classList.remove('open'),f.style.display='none',b.style.display='none',this._searchMobile&&this._searchMobile.autocomplete.setVal('')}),this.clickMaskEventSet.add(this._searchMobileOnClickMask)):(this._searchDesktopOnce=!0,l.addEventListener('click',()=>{document.body.classList.add('blur'),g.classList.add('open'),h.focus()},!1),b.addEventListener('click',()=>{b.style.display='none',this._searchDesktop&&this._searchDesktop.autocomplete.setVal('')},!1),this._searchDesktopOnClickMask=this._searchDesktopOnClickMask||(()=>{g.classList.remove('open'),f.style.display='none',b.style.display='none',this._searchDesktop&&this._searchDesktop.autocomplete.setVal('')}),this.clickMaskEventSet.add(this._searchDesktopOnClickMask)),h.addEventListener('input',()=>{h.value===''?b.style.display='none':b.style.display='inline'},!1);const k=()=>{const g=autocomplete(`#search-input-${c}`,{hint:!1,autoselect:!0,dropdownMenuContainer:`#search-dropdown-${c}`,clearOnSelected:!0,cssClasses:{noPrefix:!0},debug:!0},{name:'search',source:(e,g)=>{f.style.display='inline',b.style.display='none';const c=a=>{f.style.display='none',b.style.display='inline',g(a)};if(a.type==='lunr'){const b=()=>{lunr.queryHandler&&(e=lunr.queryHandler(e));const a={};return this._index.search(e).forEach(({ref:j,matchData:{metadata:g}})=>{const h=this._indexData[j];let{uri:e,title:f,content:c}=h;if(a[e])return;let b=0;Object.values(g).forEach(({content:a})=>{if(a){const c=a.position[0][0];(c<b||b===0)&&(b=c)}}),b-=i/5,b>0?(b+=c.substr(b,20).lastIndexOf(' ')+1,c='...'+c.substr(b,i)):c=c.substr(0,i),Object.keys(g).forEach(a=>{f=f.replace(new RegExp(`(${a})`,'gi'),`<${d}>$1</${d}>`),c=c.replace(new RegExp(`(${a})`,'gi'),`<${d}>$1</${d}>`)}),a[e]={uri:e,title:f,date:h.date,context:c}}),Object.values(a).slice(0,j)};this._index?c(b()):fetch(a.lunrIndexURL).then(a=>a.json()).then(e=>{const d={};this._index=lunr(function(){a.lunrLanguageCode&&this.use(lunr[a.lunrLanguageCode]),this.ref('objectID'),this.field('title',{boost:50}),this.field('tags',{boost:20}),this.field('categories',{boost:20}),this.field('content',{boost:10}),this.metadataWhitelist=['position'],e.forEach(a=>{d[a.objectID]=a,this.add(a)})}),this._indexData=d,c(b())}).catch(a=>{console.error(a),c([])})}else a.type==='algolia'&&(this._algoliaIndex=this._algoliaIndex||algoliasearch(a.algoliaAppID,a.algoliaSearchKey).initIndex(a.algoliaIndex),this._algoliaIndex.search(e,{offset:0,length:j*8,attributesToHighlight:['title'],attributesToSnippet:[`content:${i}`],highlightPreTag:`<${d}>`,highlightPostTag:`</${d}>`}).then(({hits:b})=>{const a={};b.forEach(({uri:b,date:d,_highlightResult:{title:e},_snippetResult:{content:c}})=>{if(a[b]&&a[b].context.length>c.value)return;a[b]={uri:b,title:e.value,date:d,context:c.value}}),c(Object.values(a).slice(0,j))}).catch(a=>{console.error(a),c([])}))},templates:{suggestion:({title:a,date:b,context:c})=>`<div><span class="suggestion-title">${a}</span><span class="suggestion-date">${b}</span></div><div class="suggestion-context">${c}</div>`,empty:({query:b})=>`<div class="search-empty">${a.noResultsFound}: <span class="search-query">"${b}"</span></div>`,footer:({})=>{const{searchType:b,icon:c,href:d}=a.type==='algolia'?{searchType:'algolia',icon:'<i class="fab fa-algolia fa-fw"></i>',href:'https://www.algolia.com/'}:{searchType:'Lunr.js',icon:'',href:'https://lunrjs.com/'};return`<div class="search-footer">Search by <a href="${d}" rel="noopener noreffer" target="_blank">${c} ${b}</a></div>`}}});g.on('autocomplete:selected',(b,a,c,d)=>{window.location.assign(a.uri)}),e?this._searchMobile=g:this._searchDesktop=g};if(a.lunrSegmentitURL&&!document.getElementById('lunr-segmentit')){const b=document.createElement('script');b.id='lunr-segmentit',b.src=a.lunrSegmentitURL,b.async=!0,b.readyState?b.onreadystatechange=()=>{(b.readyState=='loaded'||b.readyState=='complete')&&(b.onreadystatechange=null,k())}:b.onload=()=>{k()},document.body.appendChild(b)}else k()}initDetails(){this.util.forEach(document.getElementsByClassName('details'),a=>{const b=a.getElementsByClassName('details-summary')[0];b.addEventListener('click',()=>{a.classList.toggle('open')},!1)})}initLightGallery(){this.config.lightGallery&&lightGallery(document.getElementById('content'),this.config.lightGallery)}initHighlight(){this.util.forEach(document.querySelectorAll('.highlight > pre.chroma'),a=>{const b=document.createElement('div');b.className=a.className;const c=document.createElement('table');b.appendChild(c);const d=document.createElement('tbody');c.appendChild(d);const e=document.createElement('tr');d.appendChild(e);const f=document.createElement('td');e.appendChild(f),a.parentElement.replaceChild(b,a),f.appendChild(a)}),this.util.forEach(document.querySelectorAll('.highlight > .chroma'),a=>{const b=a.querySelectorAll('pre.chroma > code');if(b.length){const g=b[b.length-1],d=document.createElement('div');d.className='code-header '+g.className.toLowerCase();const e=document.createElement('span');e.classList.add('code-title'),e.insertAdjacentHTML('afterbegin','<i class="arrow fas fa-chevron-right fa-fw"></i>'),e.addEventListener('click',()=>{a.classList.toggle('open')},!1),d.appendChild(e);const f=document.createElement('span');f.insertAdjacentHTML('afterbegin','<i class="fas fa-ellipsis-h fa-fw"></i>'),f.classList.add('ellipses'),f.addEventListener('click',()=>{a.classList.add('open')},!1),d.appendChild(f);const c=document.createElement('span');c.insertAdjacentHTML('afterbegin','<i class="far fa-copy fa-fw"></i>'),c.classList.add('copy');const h=g.innerText;if((this.config.code.maxShownLines<0||h.split('\n').length<this.config.code.maxShownLines+2)&&a.classList.add('open'),this.config.code.copyTitle){c.setAttribute('data-clipboard-text',h),c.title=this.config.code.copyTitle;const a=new ClipboardJS(c);a.on('success',a=>{this.util.animateCSS(g,'flash')}),d.appendChild(c)}a.insertBefore(d,a.firstChild)}})}initTable(){this.util.forEach(document.querySelectorAll('.content table'),a=>{const b=document.createElement('div');b.className='table-wrapper',a.parentElement.replaceChild(b,a),b.appendChild(a)})}initHeaderLink(){for(let a=1;a<=6;a++)this.util.forEach(document.querySelectorAll('.single .content > h'+a),a=>{a.classList.add('headerLink'),a.insertAdjacentHTML('afterbegin',`<a href="#${a.id}" class="header-mark"></a>`)})}initToc(){const a=document.getElementById('TableOfContents');if(a===null)return;if(document.getElementById('toc-static').getAttribute('data-kept')||this.util.isTocStatic()){const b=document.getElementById('toc-content-static');a.parentElement!==b&&(a.parentElement.removeChild(a),b.appendChild(a)),this._tocOnScroll&&this.scrollEventSet.delete(this._tocOnScroll)}else{const h=document.getElementById('toc-content-auto');a.parentElement!==h&&(a.parentElement.removeChild(a),h.appendChild(a));const b=document.getElementById('toc-auto'),i=document.getElementsByClassName('page')[0],j=i.getBoundingClientRect();b.style.left=`${j.left+j.width+10}px`,b.style.maxWidth=`${i.getBoundingClientRect().left-10}px`,b.style.visibility='visible';const g=a.querySelectorAll('a:first-child'),l=a.getElementsByTagName('li'),c=document.getElementsByClassName('headerLink'),e=document.body.getAttribute('data-header-desktop')!=='normal',d=document.getElementById('header-desktop').offsetHeight,f=20+(e?d:0),k=b.offsetTop,m=k-f+(e?0:d);this._tocOnScroll=this._tocOnScroll||(()=>{const n=document.getElementById('post-footer').offsetTop,j=n-b.getBoundingClientRect().height,o=j-f+(e?0:d);this.newScrollTop<m?(b.style.position='absolute',b.style.top=`${k}px`):this.newScrollTop>o?(b.style.position='absolute',b.style.top=`${j}px`):(b.style.position='fixed',b.style.top=`${f}px`),this.util.forEach(g,a=>{a.classList.remove('active')}),this.util.forEach(l,a=>{a.classList.remove('has-active')});const i=20+(e?d:0);let h=c.length-1;for(let a=0;a<c.length-1;a++){const b=c[a].getBoundingClientRect().top,d=c[a+1].getBoundingClientRect().top;if(a==0&&b>i||b<=i&&d>i){h=a;break}}if(h!==-1){g[h].classList.add('active');let b=g[h].parentElement;while(b!==a)b.classList.add('has-active'),b=b.parentElement.parentElement}}),this._tocOnScroll(),this.scrollEventSet.add(this._tocOnScroll)}}initMath(){this.config.math&&renderMathInElement(document.body,this.config.math)}initMermaid(){const a=document.getElementsByClassName('mermaid');a.length&&(mermaid.initialize({startOnLoad:!1,theme:'null'}),this.util.forEach(a,a=>{mermaid.mermaidAPI.render('svg-'+a.id,this.data[a.id],b=>{a.insertAdjacentHTML('afterbegin',b)},a)}))}initEcharts(){this._echartsOnSwitchTheme=this._echartsOnSwitchTheme||(()=>{this._echartsArr=this._echartsArr||[];for(let a=0;a<this._echartsArr.length;a++)this._echartsArr[a].dispose();this._echartsArr=[],this.util.forEach(document.getElementsByClassName('echarts'),a=>{const b=echarts.init(a,this.isDark?'dark':'macarons',{renderer:'svg'});b.setOption(JSON.parse(this.data[a.id])),this._echartsArr.push(b)})}),this.switchThemeEventSet.add(this._echartsOnSwitchTheme),this._echartsOnSwitchTheme(),this._echartsOnResize=this._echartsOnResize||(()=>{for(let a=0;a<this._echartsArr.length;a++)this._echartsArr[a].resize()}),this.resizeEventSet.add(this._echartsOnResize)}initMapbox(){this.config.mapbox&&(mapboxgl.accessToken=this.config.mapbox.accessToken,mapboxgl.setRTLTextPlugin(this.config.mapbox.RTLTextPlugin),this._mapboxArr=this._mapboxArr||[],this.util.forEach(document.getElementsByClassName('mapbox'),b=>{const{lng:c,lat:d,zoom:e,lightStyle:f,darkStyle:l,marked:g,navigation:h,geolocate:i,scale:j,fullscreen:k}=this.data[b.id],a=new mapboxgl.Map({container:b,center:[c,d],zoom:e,minZoom:.2,style:this.isDark?l:f,attributionControl:!1});g&&(new mapboxgl.Marker).setLngLat([c,d]).addTo(a),h&&a.addControl(new mapboxgl.NavigationControl,'bottom-right'),i&&a.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0}),'bottom-right'),j&&a.addControl(new mapboxgl.ScaleControl),k&&a.addControl(new mapboxgl.FullscreenControl),a.addControl(new MapboxLanguage),this._mapboxArr.push(a)}),this._mapboxOnSwitchTheme=this._mapboxOnSwitchTheme||(()=>{this.util.forEach(this._mapboxArr,a=>{const b=a.getContainer(),{lightStyle:c,darkStyle:d}=this.data[b.id];a.setStyle(this.isDark?d:c),a.addControl(new MapboxLanguage)})}),this.switchThemeEventSet.add(this._mapboxOnSwitchTheme))}initTypeit(){if(this.config.typeit){const a=this.config.typeit,b=a.speed?a.speed:100,c=a.cursorSpeed?a.cursorSpeed:1e3,d=a.cursorChar?a.cursorChar:'|';Object.values(a.data).forEach(e=>{const f=g=>{const h=e[g],i=new TypeIt(`#${h}`,{strings:this.data[h],speed:b,lifeLike:!0,cursorSpeed:c,cursorChar:d,waitUntilVisible:!0,afterComplete:()=>{if(g===e.length-1){a.duration>=0&&window.setTimeout(()=>{i.destroy()},a.duration);return}i.destroy(),f(g+1)}}).go()};f(0)})}}initComment(){if(this.config.comment){if(this.config.comment.gitalk){this.config.comment.gitalk.body=decodeURI(window.location.href);const a=new Gitalk(this.config.comment.gitalk);a.render('gitalk')}if(this.config.comment.vssue){const a=this.config.comment.vssue;new Vue({el:'#vssue',render:b=>b('Vssue',{props:{title:a.title,options:{owner:a.owner,repo:a.repo,clientId:a.clientID,clientSecret:a.clientSecret}}})})}if(this.config.comment.valine&&new Valine(this.config.comment.valine),this.config.comment.utterances){const a=this.config.comment.utterances,b=document.createElement('script');b.src='https://utteranc.es/client.js',b.setAttribute('repo',a.repo),b.setAttribute('issue-term',a.issueTerm),a.label&&b.setAttribute('label',a.label),b.setAttribute('theme',this.isDark?a.darkTheme:a.lightTheme),b.crossOrigin='anonymous',b.async=!0,document.getElementById('utterances').appendChild(b),this._utterancesOnSwitchTheme=this._utterancesOnSwitchTheme||(()=>{const b={type:'set-theme',theme:this.isDark?a.darkTheme:a.lightTheme},c=document.querySelector('.utterances-frame');c.contentWindow.postMessage(b,'https://utteranc.es')}),this.switchThemeEventSet.add(this._utterancesOnSwitchTheme)}}}initCookieconsent(){this.config.cookieconsent&&cookieconsent.initialise(this.config.cookieconsent)}onScroll(){const c=[];if(document.body.getAttribute('data-header-desktop')==='auto'&&c.push(document.getElementById('header-desktop')),document.body.getAttribute('data-header-mobile')==='auto'&&c.push(document.getElementById('header-mobile')),document.getElementById('comments')){const a=document.getElementById('view-comments');a.href=`#comments`,a.style.display='block'}const a=document.getElementById('fixed-buttons'),b=20,d=100;window.addEventListener('scroll',()=>{this.newScrollTop=this.util.getScrollTop();const e=this.newScrollTop-this.oldScrollTop,f=this.util.isMobile();this.util.forEach(c,a=>{e>b?(a.classList.remove('fadeInDown'),this.util.animateCSS(a,['fadeOutUp','faster'],!0)):e<-b&&(a.classList.remove('fadeOutUp'),this.util.animateCSS(a,['fadeInDown','faster'],!0))}),this.newScrollTop>d?f&&e>b?(a.classList.remove('fadeIn'),this.util.animateCSS(a,['fadeOut','faster'],!0)):(!f||e<-b)&&(a.style.display='block',a.classList.remove('fadeOut'),this.util.animateCSS(a,['fadeIn','faster'],!0)):(f||(a.classList.remove('fadeIn'),this.util.animateCSS(a,['fadeOut','faster'],!0)),a.style.display='none');for(let a of this.scrollEventSet)a();this.oldScrollTop=this.newScrollTop},!1)}onResize(){window.addEventListener('resize',()=>{this._resizeTimeout||(this._resizeTimeout=window.setTimeout(()=>{this._resizeTimeout=null;for(let a of this.resizeEventSet)a();this.initToc(),this.initMermaid(),this.initSearch()},100))},!1)}onClickMask(){document.getElementById('mask').addEventListener('click',()=>{for(let a of this.clickMaskEventSet)a();document.body.classList.remove('blur')},!1)}init(){try{this.initSVGIcon(),this.initTwemoji(),this.initMenuMobile(),this.initSwitchTheme(),this.initSearch(),this.initDetails(),this.initLightGallery(),this.initHighlight(),this.initTable(),this.initHeaderLink(),this.initMath(),this.initMermaid(),this.initEcharts(),this.initTypeit(),this.initMapbox(),this.initCookieconsent()}catch(a){console.error(a)}window.setTimeout(()=>{this.initToc(),this.initComment(),this.onScroll(),this.onResize(),this.onClickMask()},100)}}const themeInit=()=>{const a=new Theme;a.init()};document.readyState!=='loading'?themeInit():document.addEventListener('DOMContentLoaded',themeInit,!1)